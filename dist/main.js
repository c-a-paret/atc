(()=>{"use strict";const t=t=>{const e=t.match(/S(\d{2,3})/g);return e&&1===e.length?parseInt(e[0].substring(1)):null};console.log("Script called...");const e="rgb(252,210,100)";class i{constructor(t,e,i,s,n,d){this.ctx=t,this.callSign=e,this.x=i,this.y=s,this.speed=n,this.heading=d}setSpeed=t=>{console.log(`${this.callSign} setting speed to ${t}`),this.speed=t};setHeading=t=>{this.heading=t};draw=()=>{this.position(),this.drawAeroplaneSpeedTail(),this.drawSpeedLabel(),this.drawHeadingLabel()};position=()=>{this.ctx.strokeStyle=e,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,5,0,2*Math.PI,!1),this.ctx.stroke()};drawAeroplaneSpeedTail=()=>{this.ctx.strokeStyle=e,this.ctx.beginPath(),this.ctx.moveTo(this.x,this.y);const t=this.heading+180,i=Math.PI/180*t,s=this.speed/4;let n=this.x+s*Math.sin(i),d=this.y-s*Math.cos(i);this.ctx.moveTo(n,d),this.ctx.lineTo(this.x,this.y),this.ctx.stroke()};drawSpeedLabel=()=>{this.ctx.fillStyle="rgb(0,213,170)",this.ctx.font="bold 12px Courier New",this.ctx.beginPath(),this.ctx.fillText(`${this.heading}`,this.x-20,this.y-20)};drawHeadingLabel=()=>{this.ctx.fillStyle=e,this.ctx.font="bold 12px Courier New",this.ctx.beginPath();const t=this.ctx.measureText(`${this.heading}`).width;this.ctx.fillText(`${this.speed}`,this.x-20+t+5,this.y-20)}}(()=>{const t=document.getElementById("background"),e=t.getContext("2d");e.fillStyle="rgb(6,17,30)",t.width=document.body.clientWidth-.2*document.body.clientWidth,t.height=document.body.clientHeight,e.fillRect(0,0,t.width,t.height)})(),console.log("Adding event listener to submit button"),document.getElementById("send-command").addEventListener("click",(()=>{const e=(e=>(console.log("Parse command called..."),{callSign:e.substring(0,5),speed:t(e)}))(document.getElementById("command-entry-field").value);n.forEach((t=>{t.callSign===e.callSign&&t.setSpeed(e.speed)}))}));const s=(()=>{const t=document.getElementById("aeroplanes"),e=t.getContext("2d");return t.width=document.body.clientWidth-.2*document.body.clientWidth,t.height=document.body.clientHeight,e})();let n=[new i(s,"AA792",230,320,120,97),new i(s,"PK324",400,400,100,135),new i(s,"BA767",600,500,240,270),new i(s,"LH132",300,700,220,350)];setInterval((()=>{document.getElementById("aeroplanes").getContext("2d").clearRect(0,0,document.body.clientWidth-.2*document.body.clientWidth,document.body.clientHeight),n.forEach((t=>t.draw()))}),1e3)})();